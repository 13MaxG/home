<html>
<head>
  <script src="processing.js"></script>
  <script src="fit.js"></script>
  
</head>

<body>
	<h1>Mistic creation</h1>
	<p>
		Please set mouse cursor to any position on the board and wait a moment.
	</p>
	<p>
		<canvas id="canvas" width="600" height="600"></canvas>
	</p>

	<script id="script" type="text/javascript">
		var fitCreator = new Processing.Sketch(); // Deklaracja nowego szkicu ProcessingJS
		fitCreator.attachFunction = function(processing) {
			// Zmienne i funkcje użytkowe
			var FPS = 30;
			var DT = 1.0 / FPS;
			var width = 600;
			var height = 600;
			
			var d = 300;
			var d2 = 150;
			var d3 = 200;
			
			var constan = 1 / 100;
			
			
			var ips = 10;
			
			
			var floating2  = 0;//= new fitFloating(schema);
			//floating2.clear();
			
			//var floating3 = new fitFloating(schema);
			//floating3.clear();
			var floating3 = 0;
			
			var xMousePositionPixels = 0;
			var yMousePositionPixels = 0;
			
			var a = 1;
			var b = 1;
			
			// ------------------------------------------------
			// "Konstruktor"
			processing.setup = function() {
				// Ustawienia ogólne
				processing.size(width, height); 
				processing.frameRate(FPS);
				processing.smooth();
				
				processing.background(0);
				processing.fill(0);
				processing.rect(0, 0, width, height);
			}
		
				var xp = -1;
				var yp = -1;
			// Grafika + obliczenia
			processing.draw = function() {
				// Czyść ekran
	
				//processing.background(255, 233, 255, 45);
				processing.fill(255, 255, 255, Math.round(13*Math.random())+1);
					processing.rect(0, 0, width-1, height-1);
				
				var toEnd = false;
				var end = false;
				
				for(var i = 0; i < ips; i++)
				
				{
					
					
					
					//if(floating2.value > 1) 
					//
				
					floating2 += ((0.001 ));
					floating3 +=((0.001 ));
				
					
				
					
				
				
					var r2 = d2 / 2.0 ;
					var dx2 = Math.cos((floating2)  * Math.PI * 2.0*a) * r2;
					var dy2 = Math.sin((floating2) * Math.PI * 2.0*a)  * r2;
				
					processing.fill(2, 255, 255, 0);
					processing.stroke(0, 34);
					processing.ellipse(width/2 + dx2, height/2 + dy2, d2, d2);
				
				
					var r3 =   d3/2  ;//
					var dx3 = Math.cos((floating3)*  Math.PI * 2.0 *b) * r3 ;
					var dy3 = Math.sin((floating3) *Math.PI * 2.0 *b) * r3 ;
				
					processing.ellipse(width/2 + dx2 + dx3, height/2 + dy2 + dy3, d3, d3);
				
					var x = width/2.0 + dx2 + dx3;
					var y = height/2.0 + dy2 + dy3;
				
					processing.stroke(0);
					//if( xp != -1 && yp  != -1)
					//processing.line(xp, yp, x, y);
					
					xp = x;
					yp = y;
					
					
					
					//if(end) break;
					if(floating2.time >=1)
					{
						//floating2.clear();
						//xp = -1;
					// yp = -1;
					//	toEnd = true;
						
					}
					
					if(floating3.time >=1)
					{
						//floating3.clear();	
						//if(toEnd == true) end = true;;
					}
				
			
				
				
				

				
				
				

				
				}
				
				//processing.fill(128);
				//processing.rect(processing.mouseX, processing.mouseY,100 ,100 );
				
				
				
			}
			// Wejście
			processing.mouseDragged = function() {
				xMousePositionPixels = processing.mouseX;
				yMousePositionPixels = processing.mouseY;
				
			}
			processing.mouseMoved = function() {
				xMousePositionPixels = processing.mouseX;
				yMousePositionPixels = processing.mouseY;
				a = (20*(xMousePositionPixels / width )) ;
				b = (20*(yMousePositionPixels / height )) ;

			}
			processing.mousePressed = function() {
				xMousePositionPixels = processing.mouseX;
				yMousePositionPixels = processing.mouseY;
				
				
				//processing.background(255);
				
			}
		}
		
		var canvas = document.getElementById("canvas"); // Pobranie canvas w którym będzie wyświetlany szkic
		var p = new Processing(canvas, fitCreator); // instalacja szkicu
	</script>
	<p>
		Andrzej Golonka, 2013 <br />
		1618.pl
	</p>
</body>
</html>
